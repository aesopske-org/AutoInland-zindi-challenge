knitr::opts_chunk$set(echo = F,message = F,warning  = F)
df =
dir("Data")
df =
dir("Data")
dir("Data")
df = read.csv("Train.csv")
df = read.csv("Train.csv")
library(tidyverse)
df = read.csv("Train.csv")
library(tidyverse)
df = read.csv("Data//Train.csv")
library(lubridate)
df$Policy.Start.Date <- Date(df$Policy.Start.Date)
head(df)
df$Policy.Start.Date <- as.Date(df$Policy.Start.Date)
df
df$Policy.End.Date   <- as.Date(df$Policy.End.Date)
df$policy_length     <- df$Policy.End.Date - df$Policy.Start.Date
df
df %>% group_by(policy_length) %>% tally()
as.numeric(df$policy_length)
library(tidyverse)
df = read.csv("Data//Train.csv")
head(df)
library(lubridate)
df$Policy.Start.Date <- as.Date(df$Policy.Start.Date)
df$Policy.End.Date   <- as.Date(df$Policy.End.Date)
df$policy_length     <- as.numeric(df$Policy.End.Date - df$Policy.Start.Date)
as.numeric(df$policy_length)
head(df)
df %>% ggplot(aes(x = policy_length))+geom_histogram()
library(lubridate)
df$Policy.Start.Date <- as.Date(df$Policy.Start.Date)
df$Policy.End.Date   <- as.Date(df$Policy.End.Date)
df$policy_length     <- as.numeric(df$Policy.End.Date - df$Policy.Start.Date)
df %>% ggplot(aes(x = policy_length))+geom_histogram()
df %>% select(Policy.Start.Date,Policy.End.Date,policy_length)
df %>% select(Policy.Start.Date,Policy.End.Date,policy_length) %>% filter(policy_length>365)
library(lubridate)
df$Policy.Start.Date <- as.Date(df$Policy.Start.Date)
df$Policy.End.Date   <- as.Date(df$Policy.End.Date)
df$policy_length     <- as.numeric(df$Policy.End.Date - df$Policy.Start.Date)
df %>% ggplot(aes(x = policy_length))+geom_histogram()
df %>% select(Policy.Start.Date,Policy.End.Date,policy_length) %>% filter(policy_length>1000)
library(lubridate)
df$Policy.Start.Date <- as.Date(df$Policy.Start.Date)
df$Policy.End.Date   <- as.Date(df$Policy.End.Date)
df$policy_length     <- as.numeric(df$Policy.End.Date - df$Policy.Start.Date)
df %>% ggplot(aes(x = policy_length))+geom_histogram()
df %>% select(Policy.Start.Date,Policy.End.Date,policy_length) %>% filter(policy_length>1000)
df %>% select(Policy.Start.Date,Policy.End.Date,policy_length) %>% filter(policy_length>3000)
df <- df %>% filter(policy_length<4000)
df %>% ggplot(aes(x = policy_length))+geom_histogram()
df %>% mutate(len = ifelse(policy_length<364,"Less_1_yr",
ifelse(policy_length<367,"Appx 1 yr","1yr+")))%>% group_by(len) %>% tally()
df %>% mutate(len = ifelse(policy_length<364,"Less_1_yr",
ifelse(policy_length<367,"Appx 1 yr","1yr+")))%>% group_by(len) %>% tally() %>% ggplot(aes(x = len,y = n))+geom_bar()
df %>% mutate(len = ifelse(policy_length<364,"Less_1_yr",
ifelse(policy_length<367,"Appx 1 yr","1yr+")))%>% group_by(len) %>% tally() %>% ggplot(aes(x = len,y = n))+geom_bar(stat = "identity")
df %>% mutate(len = ifelse(policy_length<364,"Less_1_yr",
ifelse(policy_length<367,"Appx 1 yr","1yr+")))%>% group_by(len) %>% tally() %>% ggplot(aes(x = len,y = n))+geom_bar(stat = "identity")+coord_flip()
df %>% mutate(len = ifelse(policy_length<364,"Less_1_yr",
ifelse(policy_length<367,"Appx 1 yr","1yr+")))%>% group_by(len) %>% tally() %>% ggplot(aes(x = len,y = n))+geom_bar(stat = "identity")+coord_flip()+labs(title = "Approximate Policy Duration")
df %>% mutate(len = ifelse(policy_length<364,"Less_1_yr",
ifelse(policy_length<367,"Appx 1 yr","1yr+")))%>% group_by(len) %>% tally() %>% ggplot(aes(x = len,y = n))+geom_bar(stat = "identity",fill = "green")+coord_flip()+labs(title = "Approximate Policy Duration")
df
df %>% group(Gender) %>% tally()
df %>% group_by(Gender) %>% tally()
library(janitor)
df$Gender %>% tabyl()
df$Gender %>% tabyl() %>% mutat(perc = round(percent*100,2))
df$Gender %>% tabyl() %>% mutate(perc = round(percent*100,2))
df$Gender %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
x <- df$Gender %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
x
names(x) <- c("index","n","percent","perc")
x
df$Gender %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
df$Gender %>% tabyl()
df$Gender
is.na(df$Gender)
df[is.na(df$Gender)]
x %>% ggplot(aes(x ="",y = percent,fill = index))
x %>% ggplot(aes(x ="",y = percent,fill = index))+geom_bar(stat = "identity",position = "fill")
x
x %>% ggplot(aes(x ="",y = percent,fill = index,labels = "perc")+geom_bar(stat = "identity",position = "fill")+geom_text(position = position_fill(vjust = 0.5))
x %>% ggplot(aes(x ="",y = percent,fill = index,labels = "perc")+geom_bar(stat = "identity",position = "fill")+geom_text(position = position_fill(vjust = 0.5))
knitr::opts_chunk$set(echo = F,warning = F,message =F)
# the data
library(readxl)
library(tidyverse)
library(janitor)
library(reshape2)
income <- read_excel("Daily Data/May 1st/Income.xlsx",sheet =3) %>% clean_names()
#asset  <- read_excel("Daily Data/April 25/Asset.xlsx",sheet = 3)
employee1  <- read_excel("Daily Data/May 1st/Employee.xlsx",sheet =3)%>% clean_names()
employee2  <- read_excel("Daily Data/May 1st/Employee.xlsx",sheet =4)%>% clean_names()
names(employee2) <- gsub("employee_hours","",names(employee2))
employee3  <- read_excel("Daily Data/May 1st/Employee.xlsx",sheet =5)%>% clean_names()
expense <- read_excel("Daily Data/May 1st/Expense.xlsx",sheet =3) %>% clean_names()
loan_given  <- read_excel("Daily Data/April 25/Loan_given.xlsx",sheet =3) %>% clean_names()
loan_taken  <- read_excel("Daily Data/May 1st/Loan_taken.xlsx",sheet =3) %>% clean_names()
savings1  <- read_excel("Daily Data/May 1st/Savings.xlsx",sheet =3) %>% clean_names()
# the data
library(readxl)
library(tidyverse)
library(janitor)
library(reshape2)
income <- read_excel("Daily Data/May 1st/Income.xlsx",sheet =3) %>% clean_names()
#asset  <- read_excel("Daily Data/April 25/Asset.xlsx",sheet = 3)
employee1  <- read_excel("Daily Data/May 1st/Employee.xlsx",sheet =3)%>% clean_names()
employee2  <- read_excel("Daily Data/May 1st/Employee.xlsx",sheet =4)%>% clean_names()
names(employee2) <- gsub("employee_hours","",names(employee2))
employee3  <- read_excel("Daily Data/May 1st/Employee.xlsx",sheet =5)%>% clean_names()
expense <- read_excel("Daily Data/May 1st/Expense.xlsx",sheet =3) %>% clean_names()
loan_given  <- read_excel("Daily Data/May 1st/Loan_given.xlsx",sheet =3) %>% clean_names()
loan_taken  <- read_excel("Daily Data/May 1st/Loan_taken.xlsx",sheet =3) %>% clean_names()
savings1  <- read_excel("Daily Data/May 1st/Saving.xlsx",sheet =3) %>% clean_names()
savings2  <- read_excel("Daily Data/May 1st/Saving.xlsx",sheet =2) %>% clean_names()
library(lubridate)
df$Policy.Start.Date <- as.Date(df$Policy.Start.Date)
knitr::opts_chunk$set(echo = F,message = F,warning  = F)
library(tidyverse)
df = read.csv("Data//Train.csv")
head(df)
library(lubridate)
df$Policy.Start.Date <- as.Date(df$Policy.Start.Date)
df$Policy.End.Date   <- as.Date(df$Policy.End.Date)
df$policy_length     <- as.numeric(df$Policy.End.Date - df$Policy.Start.Date)
df %>% ggplot(aes(x = policy_length))+geom_histogram()
df <- df %>% filter(policy_length<4000)
df %>% mutate(len = ifelse(policy_length<364,"Less_1_yr",
ifelse(policy_length<367,"Appx 1 yr","1yr+")))%>% group_by(len) %>% tally() %>% ggplot(aes(x = len,y = n))+geom_bar(stat = "identity",fill = "green")+coord_flip()+labs(title = "Approximate Policy Duration")
library(lubridate)
df$Policy.Start.Date <- as.Date(df$Policy.Start.Date)
df$Policy.End.Date   <- as.Date(df$Policy.End.Date)
df$policy_length     <- as.numeric(df$Policy.End.Date - df$Policy.Start.Date)
df <- df %>% filter(policy_length<4000)
df %>% mutate(len = ifelse(policy_length<364,"Less_1_yr",
ifelse(policy_length<367,"Appx 1 yr","1yr+")))%>% group_by(len) %>% tally() %>% ggplot(aes(x = len,y = n))+geom_bar(stat = "identity",fill = "green")+coord_flip()+labs(title = "Approximate Policy Duration")
library(janitor)
x <- df$Gender %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
names(x) <- c("index","n","percent","perc")
x %>% ggplot(aes(x ="",y = percent,fill = index,labels = "perc")+geom_bar(stat = "identity",position = "fill")+geom_text(position = position_fill(vjust = 0.5))
x <- df$Gender %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
names(x) <- c("index","n","percent","perc")
x
pie(x$n,labels = x$index)
x
library(janitor)
x <- df$Gender %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
names(x) <- c("index","n","percent","perc")
x$label = paste(x$index," = ", x$percent)
pie(x$n,labels = x$label)
library(janitor)
x <- df$Gender %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
names(x) <- c("index","n","percent","perc")
x$label = paste(x$index," = ", x$perc)
pie(x$n,labels = x$label)
pie(x$n,labels = x$label,edges =10)
pie(x$n,labels = x$label,clockwise = T)
pie(x$n,labels = x$label,clockwise = F)
df <- df %>% mutate(Gender = ifelse(Gender=="Male","Male",
ifelse(Gender=="Female","Female","Other")))
library(janitor)
x <- df$Gender %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
names(x) <- c("index","n","percent","perc")
x$label = paste(x$index," = ", x$perc)
pie(x$n,labels = x$label,clockwise = F)
df <- df %>% mutate(Gender = ifelse(Gender=="Male","Male",
ifelse(Gender=="Female","Female","Other")))
x <- df$Gender %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
names(x) <- c("index","n","percent","perc")
x$label = paste(x$index," = ", x$perc)
pie(x$n,labels = x$label,clockwise = F)
df
pie(x$n,labels = x$label,clockwise = F)
df
hist(Age)
hist(df$Age)
min(df$Age)
df %>% filter(Age<10)
df <- df %>% filter(Age>10)
max(df$Gender)
max(df$Age)
df %>% filter(Age>100)
df <- df %>% filter(Age>10)
df <- df %>% filter(Age< 100)
max(df$Age)
df <- df %>% filter(Age<121)
max(df$Age)
df <- df %>% filter(Age>10)
df <- df %>% filter(Age<121)
max(df$Age)
hist(df$Age)
hist(df$Age,color = "green")
df <- df %>% filter(Age>10)
df <- df %>% filter(Age<121)
max(df$Age)
hist(df$Age)
df
df$First.Transaction.Date <- as.Date(df$First.Transaction.Date)
df
hist(df$No_Pol)
df
x <- df$Car_Category %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
names(x) <- c("index","n","percent","perc")
x$label = paste(x$index," = ", x$perc)
pie(x$n,labels = x$label,clockwise = F)
df
df %>% filter(Car_Category == "")
x <- df$Subject_Car_Colour %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
names(x) <- c("index","n","percent","perc")
x$label = paste(x$index," = ", x$perc)
pie(x$n,labels = x$label,clockwise = F)
df
x <- df$Subject_Car_Make %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
names(x) <- c("index","n","percent","perc")
x$label = paste(x$index," = ", x$perc)
pie(x$n,labels = x$label,clockwise = F)
df %>% filter(Subject_Car_Make = "")
df %>% filter(Subject_Car_Make = "")
df %>% filter(Subject_Car_Make == "")
pie(x$n,labels = x$label,clockwise = F)
df
x <- df$LGA_Name %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
names(x) <- c("index","n","percent","perc")
x$label = paste(x$index," = ", x$perc)
pie(x$n,labels = x$label,clockwise = F)
x <- df$State %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
names(x) <- c("index","n","percent","perc")
x$label = paste(x$index," = ", x$perc)
pie(x$n,labels = x$label,clockwise = F)
x <- df$LGA_Name %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
names(x) <- c("index","n","percent","perc")
x$label = paste(x$index," = ", x$perc)
pie(x$n,labels = x$label,clockwise = F)
x <- df$State %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
names(x) <- c("index","n","percent","perc")
x$label = paste(x$index," = ", x$perc)
pie(x$n,labels = x$label,clockwise = F)
df
x <- df$ProductName %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
names(x) <- c("index","n","percent","perc")
x$label = paste(x$index," = ", x$perc)
pie(x$n,labels = x$label,clockwise = F)
x <- df$ProductName %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
names(x) <- c("index","n","percent","perc")
x$label = paste(x$index," = ", x$perc)
pie(x$n,labels = x$label,clockwise = F)
df
x <- df$target %>% tabyl() %>% mutate(perc = paste(round(percent*100,2),"%"))
names(x) <- c("index","n","percent","perc")
x$label = paste(x$index," = ", x$perc)
pie(x$n,labels = x$label,clockwise = F)
library(knitr)
